VideoOutput {
    id: output_%1
    anchors.left: %2
    anchors.top: %3
    width: parent.width/%4
    height: parent.height/%5
    source: videoProducer_%1
    focus: false

    MouseArea {
        anchors.fill: parent
        acceptedButtons: Qt.LeftButton | Qt.RightButton

        onClicked: {
            focus=true
            if (mouse.button === Qt.RightButton)
                contextMenu_%1.popup()
        }

        onPressAndHold: {
            if (mouse.source === Qt.MouseEventNotSynthesized)
                contextMenu_%1.popup()
        }

        onDoubleClicked: {
            contextMenu_%1.popup()
        }

        Menu {
            id: contextMenu_%1
            MenuItem {
                text: qsTr("Back")
                onClicked: {
                    wnd.showStartScreen();
                }
            }

            MenuItem {
                text: qsTr("Show HI resolution")
                onClicked: {
                    wnd.hiResUrl = videoProducer_%1.hiResUrl
                    wnd.runHiRes();
                }
            }

            MenuItem {
                text: qsTr("Quit application")
                onClicked: {
                    wnd.saveParameters()
                    Qt.quit()
                }
            }
        }
    }

    Keys.onPressed: {
        if (event.key === Qt.Key_Escape || event.key === Qt.Key_Back) {
            wnd.showStartScreen();
            event.accepted = true
        }
    }

    onVisibleChanged: {
        source.updateTimer(visible)
    }
}
